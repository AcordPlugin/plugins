(function(h,x,v,d,l){"use strict";function p(a){return a&&typeof a=="object"&&"default"in a?a:{default:a}}var c=p(h),u=p(x),w=()=>v.injectCSS(".tabs--container{box-sizing:border-box;display:flex;align-items:center;width:100%;height:30px;gap:4px;padding:0 4px;transition:.1s ease-in-out opacity;-webkit-app-region:drag}.tabs--disabled{opacity:.1!important;pointer-events:none}.tabs--new-tab{color:#fff;width:12px;height:12px;transform:rotate(45deg);cursor:pointer;margin-left:4px;-webkit-app-region:no-drag}.tabs--item{-webkit-app-region:no-drag;color:#fff;background-color:#00000040;box-sizing:border-box;width:fit-content;height:30px;display:flex;align-items:center;justify-content:space-between;padding:0 8px;gap:8px;border-top-left-radius:8px;border-top-right-radius:8px;cursor:pointer;opacity:.5}.tabs--item--info{display:flex;align-items:center;justify-content:flex-start;gap:8px}.tabs--item--icon{border-radius:4px;width:14px;height:14px;background-size:cover;background-position:center;background-repeat:no-repeat}.tabs--item--title{font-size:14px;text-overflow:ellipsis;word-break:keep-all;overflow:hidden;white-space:nowrap;min-width:150px;max-width:250px}.tabs--item--close{color:#ffffff80;width:12px;height:12px;cursor:pointer}.tabs--item--disabled{opacity:.5;pointer-events:none}.tabs--item--selected{opacity:1}");function b(){return`
  <svg viewBox="0 0 12 12">
    <polygon fill="currentColor" fill-rule="evenodd" points="11 1.576 6.583 6 11 10.424 10.424 11 6 6.583 1.576 11 1 10.424 5.417 6 1 1.576 1.576 1 6 5.417 10.424 1"></polygon>
  </svg>
  `}var y={load(){d.subscriptions.push(w()),d.subscriptions.push((()=>{const a=c.default.parseHTML(`
                <div class="tabs--container"></div>
            `);u.default.ifExists(document.querySelector('div[class*="bg-"]'),i=>i.remove()),document.querySelector('[class*="appDevToolsWrapper-"]').insertAdjacentElement("beforebegin",a);let m=c.default.parseHTML(`
                <div class="tabs--new-tab">
                    ${b()}
                </div>
            `);m.onclick=()=>{f("Loading..","/channels/@me",!0)},a.appendChild(m);function f(i,n,s){let e=c.default.parseHTML(`
                    <div class="tabs--item">
                        <span class="tabs--item--info">
                            <span class="tabs--item--icon"></span>
                            <span class="tabs--item--title">${c.default.escapeHTML(i)}</span>
                        </span>
                        <span class="tabs--item--close">
                            ${b()}
                        </span>
                    </div>
                `);e.setAttribute("data-pathname",n);async function t(){await new Promise(o=>setTimeout(o,1)),l.Router.transitionTo(e.getAttribute("data-pathname")),document.querySelectorAll(".tabs--item--selected").forEach(o=>o.classList.remove("tabs--item--selected")),e.classList.add("tabs--item--selected")}function r(){document.querySelector(".tabs--item").onclick(),e.remove()}e.select=t,e.close=r,e.onclick=async()=>{location.pathname!=e.getAttribute("data-pathname")&&t()},e.querySelector(".tabs--item--close").onclick=()=>{document.querySelectorAll(".tabs--item").length!=1&&r()},a.querySelector(".tabs--new-tab").insertAdjacentElement("beforebegin",e),s&&(g(e),t())}f("Loading..","/channels/@me",!0);function g(i){let n=window.location.pathname;i.setAttribute("data-pathname",n),i.querySelector(".tabs--item--title").textContent=document.title;let s=n.split("/"),e="";if(s[1]==="channels")if(s[2]==="@me"){let t=l.ChannelStore.getChannel(s[3]);if(t){if(t.isGroupDM()&&t.icon)e=`url('https://cdn.discordapp.com/channel-icons/${t.id}/${t.icon}.webp?size=32')`;else if(t.isDM()){let r=t.getRecipientId(),o=l.UserStore.getUser(r);o?.avatar?e=`url('https://cdn.discordapp.com/avatars/${r}/${o.avatar}.webp?size=32')`:e=`url('https://cdn.discordapp.com/embed/avatars/${o.discriminator%5}.png')`}}}else{let t=l.GuildStore.getGuild(s[2]);t?.icon&&(e=`url('https://cdn.discordapp.com/icons/${t.id}/${t.icon}.webp?size=32')`)}i.querySelector(".tabs--item--icon").setAttribute("style",e?`background-image: ${e};`:"background-color: #5865f2;")}const S=u.default.interval(()=>{let n=[...document.querySelectorAll(".tabs--item")].find(s=>s.classList.contains("tabs--item--selected"));if(n){if(n.getAttribute("data-pathname")===window.location.pathname)return;g(n)}else[...document.querySelectorAll(".tabs--item")].pop()?.select?.()},100);return()=>{S(),a.remove()}})())},unload(){}};return y})(acord.dom,acord.utils,acord.patcher,acord.extension,acord.modules.common);
