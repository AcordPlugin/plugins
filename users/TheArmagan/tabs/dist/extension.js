(function(v,x,w,d,o){"use strict";function u(a){return a&&typeof a=="object"&&"default"in a?a:{default:a}}var p=u(v),b=u(x),S=()=>w.injectCSS(".tabs--container{box-sizing:border-box;display:flex;align-items:center;width:100%;height:30px;gap:4px;padding:0 4px;transition:.1s ease-in-out opacity;-webkit-app-region:drag}.tabs--disabled{opacity:.1!important;pointer-events:none}.tabs--new-tab{color:#fff;width:12px;height:12px;transform:rotate(45deg);cursor:pointer;margin-left:4px;-webkit-app-region:no-drag}.tabs--item{-webkit-app-region:no-drag;color:#fff;background-color:#00000040;box-sizing:border-box;width:fit-content;height:30px;display:flex;align-items:center;justify-content:space-between;padding:0 8px;gap:8px;border-top-left-radius:8px;border-top-right-radius:8px;cursor:pointer;opacity:.5}.tabs--item--info{display:flex;align-items:center;justify-content:flex-start;gap:8px}.tabs--item--icon{border-radius:4px;width:14px;height:14px;background-size:cover;background-position:center;background-repeat:no-repeat}.tabs--item--title{font-size:14px;text-overflow:ellipsis;word-break:keep-all;overflow:hidden;white-space:nowrap;min-width:150px;max-width:250px}.tabs--item--close{color:#ffffff80;width:12px;height:12px;cursor:pointer;transition:.1s ease-in-out opacity}.tabs--item--close--hidden{opacity:0;pointer-events:none}.tabs--item--disabled{opacity:.5;pointer-events:none}.tabs--item--selected{opacity:1}");function m(){return`
  <svg viewBox="0 0 12 12">
    <polygon fill="currentColor" fill-rule="evenodd" points="11 1.576 6.583 6 11 10.424 10.424 11 6 6.583 1.576 11 1 10.424 5.417 6 1 1.576 1.576 1 6 5.417 10.424 1"></polygon>
  </svg>
  `}var q={load(){d.subscriptions.push(S()),d.subscriptions.push((()=>{const a=p.default.parseHTML(`
                <div class="tabs--container"></div>
            `);b.default.ifExists(document.querySelector('div[class*="bg-"]'),t=>t.remove()),document.querySelector('[class*="appDevToolsWrapper-"]').insertAdjacentElement("beforebegin",a);let f=p.default.parseHTML(`
                <div class="tabs--new-tab">
                    ${m()}
                </div>
            `);f.onclick=()=>{h("Loading..","/channels/@me",null,!0)},a.appendChild(f);function h(t,i,n,s){let e=p.default.parseHTML(`
                    <div class="tabs--item">
                        <span class="tabs--item--info">
                            <span class="tabs--item--icon" style="${n||"background-color: #5865f2;"}"></span>
                            <span class="tabs--item--title">${p.default.escapeHTML(t)}</span>
                        </span>
                        <span class="tabs--item--close">
                            ${m()}
                        </span>
                    </div>
                `);e.setAttribute("data-pathname",i);async function r(){await new Promise(c=>setTimeout(c,1)),location.pathname===e.getAttribute("data-pathname")&&o.Router.transitionTo(e.getAttribute("data-pathname")),document.querySelectorAll(".tabs--item--selected").forEach(c=>c.classList.remove("tabs--item--selected")),e.classList.add("tabs--item--selected"),document.querySelectorAll(".tabs--item--close.tabs--item--close--hidden").forEach(c=>c.classList.remove("tabs--item--close--hidden")),document.querySelectorAll(".tabs--item").length===1&&document.querySelector(".tabs--item--close").classList.add("tabs--item--close--hidden"),g()}function l(){document.querySelector(".tabs--item").onclick(),e.remove(),document.querySelectorAll(".tabs--item").length===1&&document.querySelector(".tabs--item--close").classList.add("tabs--item--close--hidden"),g()}e.select=r,e.close=l,e.onclick=async()=>{location.pathname!==e.getAttribute("data-pathname")&&r()},e.querySelector(".tabs--item--close").onclick=()=>{document.querySelectorAll(".tabs--item").length!==1&&l()},a.querySelector(".tabs--new-tab").insertAdjacentElement("beforebegin",e),s&&(y(e),r())}function g(){d.persist.store.userTabs[o.UserStore.getCurrentUser().id]=[...document.querySelectorAll(".tabs--item")].map(t=>({pathname:t.getAttribute("data-pathname"),title:t.querySelector(".tabs--item--title").textContent,icon:t.querySelector(".tabs--item--icon").getAttribute("style"),selected:t.classList.contains("tabs--item--selected")}))}async function y(t){await new Promise(e=>setTimeout(e,1));let i=window.location.pathname;t.setAttribute("data-pathname",i),t.querySelector(".tabs--item--title").textContent=document.title;let n=i.split("/"),s="";if(n[1]==="channels")if(n[2]==="@me"){let e=o.ChannelStore.getChannel(n[3]);if(e){if(e.isGroupDM()&&e.icon)s=`url('https://cdn.discordapp.com/channel-icons/${e.id}/${e.icon}.webp?size=32')`;else if(e.isDM()){let r=e.getRecipientId(),l=o.UserStore.getUser(r);l?.avatar?s=`url('https://cdn.discordapp.com/avatars/${r}/${l.avatar}.webp?size=32')`:s=`url('https://cdn.discordapp.com/embed/avatars/${l.discriminator%5}.png')`}}}else{let e=o.GuildStore.getGuild(n[2]);e?.icon&&(s=`url('https://cdn.discordapp.com/icons/${e.id}/${e.icon}.webp?size=32')`)}t.querySelector(".tabs--item--icon").setAttribute("style",s?`background-image: ${s};`:"background-color: #5865f2;")}const A=b.default.interval(()=>{let t=document.querySelector(".tabs--item--selected");if(t){if(t.getAttribute("data-pathname")===window.location.pathname)return;y(t)}else[...document.querySelectorAll(".tabs--item")].pop()?.select?.()},100);{let t=d.persist.ghost.userTabs?.[o.UserStore.getCurrentUser().id]||[{title:"Loading..",pathname:"/channels/@me",selected:!0}];console.log(t),t.forEach(i=>{h(i.title,i.pathname,i.icon,i.selected)})}return()=>{A(),a.remove()}})())},unload(){}};return q})(acord.dom,acord.utils,acord.patcher,acord.extension,acord.modules.common);
