(function(l,c,n){"use strict";function u(e){return e&&typeof e=="object"&&"default"in e?e:{default:e}}var d=u(l);class p{constructor(){this.patches=[]}add(...t){this.patches.push(...t)}remove(t){let[i]=this.patches.splice(this.patches.indexOf(s=>s==t),1);i()}removeAll(){let t=this.patches.splice(0,this.patches.length);for(let i=0;i<t.length;i++)t[i]()}}var a=new p;const h=/<(a)?:?([^:]{2,})+:(\d+)>/g;var f={load(){a.add(d.default.instead("sendMessage",n.MessageActions,async function(e,t){let i=n.SelectedGuildStore.getGuildId();return e[1]&&e[1].content&&(e[1].invalidEmojis=[],e[1].validNonShortcutEmojis=e[1].validNonShortcutEmojis.filter(s=>!s.available),e[1].content=e[1].content.replace(h,(s,m,v,o)=>{if(!v.trim())return s;let r=n.EmojiStore.getCustomEmojiById(o);return r&&!r.animated&&i&&r.guildId==i?s:` https://cdn.discordapp.com/emojis/${o}.${m=="a"?"gif":"png"}?size=${c.persist.ghost.settings.size}`}).trim()),t.call(this,...e)})),a.add(d.default.instead("canUseEmojisEverywhere",n.PremiumActions,async function(e,t){return!0})),a.add(d.default.instead("canUseAnimatedEmojis",n.PremiumActions,async function(e,t){return!0}))},unload(){a.removeAll()},settings:{data:[{type:"input",altType:"number",property:"size",value:"32",name:"Emote Size",description:"Allowed sizes: 16, 32, 48, 64, 96, 128, 256, 512, 1024",size:"small"}]}};return f})(acord.patcher,acord.extension,acord.modules.common);
