(function(n,d,t){"use strict";function l(e){return e&&typeof e=="object"&&"default"in e?e:{default:e}}var u=l(d);const f=/<\$(a)?(\d+)>/g,p=/<(a)?:?([^:]{2,})+:(\d+)>/g;var E={load(){n.subscriptions.push(u.default.before("dispatch",t.FluxDispatcher,e=>(e[0].type==="MESSAGE_CREATE"&&e[0]?.message?.content&&(e[0].message.content=e[0].message.content.replace(f,(s,a,i)=>`<${a=="a"?"a:":""}_:${i}>`)),e[0]))),n.subscriptions.push(u.default.instead("sendMessage",t.MessageActions,async function(e,s){let a=t.SelectedGuildStore.getGuildId();return e[1]&&e[1].content&&(e[1].invalidEmojis=[],e[1].validNonShortcutEmojis=e[1].validNonShortcutEmojis.filter(i=>!i.available),e[1].content=e[1].content.replace(p,(i,o,m,c)=>{if(!m.trim())return i;let r=t.EmojiStore.getCustomEmojiById(c);return r&&!r.animated&&a&&r.guildId==a?i:(console.log(`<$${o||""}${c}>`),`<$${o||""}${c}>`)}).trim()),s.call(this,...e)})),n.subscriptions.push(u.default.instead("canUseEmojisEverywhere",t.PremiumActions,async function(e,s){return!0})),n.subscriptions.push(u.default.instead("canUseAnimatedEmojis",t.PremiumActions,async function(e,s){return!0}))},unload(){}};return E})(acord.extension,acord.patcher,acord.modules.common);
