(function(u,d,i){"use strict";function l(e){return e&&typeof e=="object"&&"default"in e?e:{default:e}}var a=l(d);const f=/<\$(a)?(\d+)>/g,p=/<(a:)?([^:]{2,})+:(\d+)>/g;var E={load(){u.subscriptions.push(a.default.before("dispatch",i.FluxDispatcher,e=>(e[0].type==="MESSAGE_CREATE"&&e[0]?.message?.content&&(e[0].message.content=e[0].message.content.replace(f,(n,s,t)=>(console.log(n,`<${s=="a"?"a:":""}_:${t}>`),`<${s=="a"?"a:":""}_:${t}>`))),e[0]))),u.subscriptions.push(a.default.instead("sendMessage",i.MessageActions,async function(e,n){let s=i.SelectedGuildStore.getGuildId();return e[1]&&e[1].content&&(e[1].invalidEmojis=[],e[1].validNonShortcutEmojis=e[1].validNonShortcutEmojis.filter(t=>!t.available),e[1].content=e[1].content.replace(p,(t,r,h,c)=>{if(!h.trim())return t;let o=i.EmojiStore.getCustomEmojiById(c);return o&&!o.animated&&s&&o.guildId==s?t:(console.log(`<$${r}${c}>`),`<$${r}${c}>`)}).trim()),n.call(this,...e)})),u.subscriptions.push(a.default.instead("canUseEmojisEverywhere",i.PremiumActions,async function(e,n){return!0})),u.subscriptions.push(a.default.instead("canUseAnimatedEmojis",i.PremiumActions,async function(e,n){return!0}))}};return E})(acord.extension,acord.patcher,acord.modules.common);
